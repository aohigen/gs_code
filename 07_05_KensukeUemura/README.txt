SQLを使った何かしらの分析ツールを作ろうと思い、政府が公開している人口のデータを元にWEB上で視覚的に分析できるツールを作りました。

工夫した点は、BootStrapを初めて使ってみて、カスタマイズをして見た目的にも完成度の高いものにできるようにしました。
BootStrapのテンプレートはかなり複雑で、まだ今の段階ではソースが煩雑だと理解が遅くなるので、不要な部分はすべて削除をしてスッキリとさせました。

人口データ（dataフォルダに格納）は、各年代や都道府県ごとに別れていたため、初回のグラフ描写ではWHEREで総数だけに絞ることで年ごとのグラフに絞り込みました。
また、男女比も同時に視覚的に見れたら良いと思い、Chart.jsを使って、3軸の折れ線グラフにしました。

また、様々なデータの絞り込みもしたいと考え、ヘッダーにてフィルタ機能を実装しました。
授業でもらったサンプルコードでは、SQLを一行で書いてありましたが、個人的にフィルタ機能を作る際には、SELECT、FROM、WHERE、GROUPBYという各要素ごとに変数で分けた方がコントロールしやすかったため、変数を分けて最後に組み合わせる形に工夫をしました。

また、細かいですが、主軸となる「都道府県」「年齢」「西暦」によって項目が分かれるため、ここはjQueryを使って、選ばれた項目ごとに選択肢を表示非表示でコントロールをして、余計な選択肢が表示しないように配慮しました。
フィルタの部分が情報量が多くなってしまいソースが重たくなってしまったため、phpで外部ファイル読み込みにすることでソースの簡素化も行いました。


BootStrapのフォーマットに合わせて、SQLで取得をした数値を「最大値」「最大値比」「女性率」と言った指標に計算を行いました。
また「人口の変化」の下に指定された対象期間が動的に切り替わるようになど、テンプレートのデザインを生かした細かい動的値の表示にもこだわりました。（ページ下部の〇〇年前比、と言った箇所も、動的にゲージが変わるようにしています）

また、グラフのアップデートもやってみたく、人数だけでは見えにくい「増加率」という指標も.length[i]/.length[i-1]というシンプルな計算で導いて、クリックすると切り替えられるようにしました。


未対応箇所について。
「期間」というボタンで、グラフの対象期間もモーダルで選べるようにしたかったですが、ここは間に合わず未対応となっています。
また、時間があればいろいろな公開データをデータベースに保存をして、様々なデータを分析できるようにしたかったですが、ここも間に合わずサイドメニューはすべてダミーで項目が書いてあるだけとなります。

あとは、現在は単一条件のフィルタしかかけられませんが、複数条件のフィルタも作りたかったですが、こちらはどちらかというとデザイン面でどのような方法が最適かを考えるに時間が必要と考え、ノンタッチとなっています。
最近ではドラッグ＆ドロップでルールが作成できるツールも増えているので、何か、このような検索機能のデザインテンプレートなどがあれば、ぜひご教授いただきたいです。
